{"remainingRequest":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Projects\\Согласование\\CR_Approve_vue\\src\\views\\ListUserForMZ\\listUserForMZ.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\src\\views\\ListUserForMZ\\listUserForMZ.vue","mtime":1622012791199},{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projects\\Согласование\\CR_Approve_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICcuLi8uLi9zdHlsZS9zdHlsZVBhZ2VzLmNzcyc7DQoNCnRhYmxlIHRib2R5IHRyOmhvdmVyIHsNCgliYWNrZ3JvdW5kOiAjZjFmMWYxOw0KCWJveC1zaGFkb3c6IDAgMS41cHggNnB4ICMwMDAwMDA4MDsNCn0NCnRyIHRkIHsNCgl0ZXh0LWFsaWduOiBjZW50ZXIhaW1wb3J0YW50Ow0KfQ0KdHIgdGggew0KCXRleHQtYWxpZ246IGNlbnRlciFpbXBvcnRhbnQ7DQp9DQoNCi5wb2ludGVyIHsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQo="},{"version":3,"sources":["listUserForMZ.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"listUserForMZ.vue","sourceRoot":"src/views/ListUserForMZ","sourcesContent":["<template>\r\n\t<div class=\"b-page-wrapper administrator\">\r\n\t\t<div class=\"b-head-block\">\r\n\t\t\t<div class=\"b-container\">\r\n\t\t\t\t<div class=\"b-head-block__wrapper\">\r\n\t\t\t\t\t<h1 class=\"b-title b-title--h1\">Пользователи МНПКО\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"b-container\">\r\n\t\t\t<div class=\"b-wrapper-page b-wrapper-page--users-mpnko\">\r\n\t\t\t\t<!-- ФИЛЬТР ПОИСКА -->\r\n\t\t\t\t<div :class=\"{'b-filter': true, open: open}\">\r\n\t\t\t\t\t<button @click=\"open=!open\" class=\"b-filter__button\">\r\n\t\t\t\t\t\t<iconSvg v-if=\"!open\" class=\"b-icon b-icon--filter icon-filter icon\"/>\r\n\t\t\t\t\t\t<span v-if=\"!open\" class=\"open\">Фильтр записей</span>\r\n\t\t\t\t\t\t<i v-if=\"open\" class=\"b-icon b-icon--filter-close icon-close\"></i>\r\n\t\t\t\t\t\t<span v-if=\"open\" class=\"close\">Скрыть</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<form class=\"b-filter__hidden\" action=\"javascript:void(0);\">\r\n\t\t\t\t\t\t<div class=\"b-filter__form\">\r\n\t\t\t\t\t\t\t<div class=\"b-input b-input--dual b-input--dual b-input--clinical b-input--search input-group\">\r\n\t\t\t\t\t\t\t\t<div class=\"b-input b-input--dual b-input--dual b-input--clinical b-input--search b-input--users-mpnko\">\r\n\t\t\t\t\t\t\t\t\t<input v-model=\"search.MPNKO\" class=\"b-input__input-field b-input__input-field--dual b-input__input-field--dual b-input__input-field--clinical b-input__input-field--search b-input__input-field--users-mpnko\" id=\"search-filter\" type=\"search\" placeholder=\"Поиск по МПНКО\" name=\"search-filter-name\"/>\r\n\t\t\t\t\t\t\t\t\t<iconSearchSvg class=\"iconSearch\"/>\r\n\t\t\t\t\t\t\t\t\t<label class=\"b-input__label\" for=\"search-filter\">Поиск по МПНКО</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"b-input b-input--dual b-input--dual b-input--clinical b-input--search b-input--fio\">\r\n\t\t\t\t\t\t\t\t\t<input v-model=\"search.fio\" class=\"b-input__input-field b-input__input-field--dual b-input__input-field--dual b-input__input-field--clinical b-input__input-field--search b-input__input-field--users-mpnko\" id=\"search-filter\" type=\"search\" placeholder=\"Поиск по ФИО\" name=\"search-filter-name\"/>\r\n\t\t\t\t\t\t\t\t\t<iconSearchSvg class=\"iconSearch\"/>\r\n\t\t\t\t\t\t\t\t\t<label class=\"b-input__label\" for=\"search-filter\">Поиск по ФИО</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"b-input b-input--dual b-input--dual b-input--clinical b-input--search b-input--fio\">\r\n\t\t\t\t\t\t\t\t\t<input v-model=\"search.login\" class=\"b-input__input-field b-input__input-field--dual b-input__input-field--dual b-input__input-field--clinical b-input__input-field--search b-input__input-field--users-mpnko\" id=\"search-filter\" type=\"search\" placeholder=\"Поиск по логину\" name=\"search-filter-name\"/>\r\n\t\t\t\t\t\t\t\t\t<iconSearchSvg class=\"iconSearch\"/>\r\n\t\t\t\t\t\t\t\t\t<label class=\"b-input__label\" for=\"search-filter\">Поиск по логин</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button style=\"margin-bottom:24px;padding-top:16px;\" @click=\"getUserMZ(search)\" class=\"b-button b-button--fill mb-2\">Применить</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"b-table-list b-table-list--users b-table-list--administrator\">\r\n\t\t\t\t\t<div class=\"b-table-list__top\">\r\n\r\n\t\t\t\t\t\t<!-- ДЛЯ ВЕРСИИ ДЕСКТОПА -->\r\n\t\t\t\t\t\t<div class=\"b-table-list__desktop\">\r\n\t\t\t\t\t\t\t<div class=\"b-table-list__wrapper-top\">\r\n\t\t\t\t\t\t\t\t<div class=\"b-table-list__left\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"b-table-list__all\">Всего записей:<span>{{listUsers.length}}</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<router-link :to=\"{path: 'addUser', query: {mz: true}}\">\r\n\t\t\t\t\t\t\t\t\t\t<button class=\"b-button b-button--new-user b-button--empty b-button--full\">\r\n\t\t\t\t\t\t\t\t\t\t\t<iconPlusSvg class=\"b-icon b-icon--plus icon-plus\" />\r\n\t\t\t\t\t\t\t\t\t\t\tДобавить пользователя\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"b-table-list__right\">\r\n\t\t\t\t\t\t\t\t\t<a @click=\"downloadReports\" class=\"b-link b-link--report-mpnlo\" href=\"javascript:void(0);\" title=\"\">\r\n\t\t\t\t\t\t\t\t\t\t<iconDownloadSvg class=\"b-icon b-icon--report icon-download\"/>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"mobile\">Получить отчет</span>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<!-- ДЛЯ ВЕРСИИ ТЕЛЕФОНА -->\r\n\t\t\t\t\t\t<div class=\"b-table-list__mobile\">\r\n\t\t\t\t\t\t\t<router-link to=\"/addUser\">\r\n\t\t\t\t\t\t\t\t<button class=\"b-button b-button--new-user b-button--empty b-button--full\">\r\n\t\t\t\t\t\t\t\t\t<iconPlusSvg class=\"b-icon b-icon--plus icon-plus\" />\r\n\t\t\t\t\t\t\t\t\tДобавить пользователя\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t<div class=\"b-table-list__wrapper-top\">\r\n\t\t\t\t\t\t\t\t<div class=\"b-table-list__left\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"b-table-list__all\">Всего записей:<span>{{listUsers.length}}</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"b-table-list__right\">\r\n\t\t\t\t\t\t\t\t\t<a class=\"b-link b-link--report-mpnlo\" href=\"javascript:void(0);\" title=\"\">\r\n\t\t\t\t\t\t\t\t\t<iconDownloadSvg class=\"b-icon b-icon--report icon-download\"/>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"mobile\">Отчет</span>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"b-table-list__table\">\r\n\t\t\t\t\t\t<div class=\"b-table-list__scroll--table js-horizontal-scroll\">\r\n\t\t\t\t\t\t\t<table class=\"b-table-list__table b-table-list__table--scroll-width\">\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t<th onselectstart=\"return false\" onmousedown=\"return false\" v-for=\"(item, ind) in columns\" :style=\"ind == 3 ? 'padding-right:0!important' : ''\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span @click=\"item.view ? sortFunc(item) : ''\" :style=\"item.view ? 'cursor:pointer' : ''\">{{item.name}}</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div v-show=\"checkColumn == item.nameEng && item.view\" class=\"b-table-list__arrow\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"item.sort\" class=\"b-table-list__top-button\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<iconSortupSvg class=\"b-icon b-icon--table-button icon-sort-up\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button v-else class=\"b-table-list__bottom-button\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<iconSortdownSvg class=\"b-icon b-icon--table-button icon-sort-up\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <th>Действия</th> -->\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr v-for=\"(row, index) in listUsers\">\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<div @click=\"editRow(row)\" class=\"b-table-list__employee\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<iconEditSvg class=\"b-icon b-icon--edit icon-edit pointer\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\tСотрудник {{row.role ? row.role.name : '---'}}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{{row.companyName}}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{{row.name}}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{{row.login}}</td>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <td style=\"padding-left:0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"b-table-list__key mr-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<admin-button :order=\"0\" scrollSearch=\"#keyIcon\" :index=\"index\" :id=\"row.id\" action=\"resetPassword\" text=\"Отправить ссылку для создания пароля?\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template slot=\"icons\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<key id=\"keyIcon\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</admin-button>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</td> -->\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport key from '../../assets/icons/svg/key.svg?inline'\r\n\r\nimport iconSvg from \"../../assets/icons/svg/filter.svg\"\r\nimport iconSearchSvg from \"../../assets/icons/svg/search.svg\"\r\nimport iconDownloadSvg from \"../../assets/icons/svg/download.svg\"\r\nimport iconSortdownSvg from \"../../assets/icons/svg/sort-down.svg\"\r\nimport iconSortupSvg from \"../../assets/icons/svg/sort-up.svg\"\r\nimport iconPlusSvg from \"../../assets/icons/svg/plus.svg\"\r\nimport iconEditSvg from \"../../assets/icons/svg/edit.svg\"\r\nimport iconLockSvg from \"../../assets/icons/svg/lock.svg\"\r\n// import iconKeySvg from \"../../assets/icons/svg/key.svg\"\r\nimport iconCloseSvg from \"../../assets/icons/svg/close.svg\"\r\n\r\nimport adminButton from '../../components/AdminButon/index'\r\nimport {mapGetters, mapActions, mapMutations} from 'vuex'\r\n\r\nexport default {\r\n\tcomponents: { adminButton, iconCloseSvg, iconSvg, iconSearchSvg, iconDownloadSvg, iconSortdownSvg, iconSortupSvg, iconPlusSvg, iconEditSvg, iconLockSvg, key},\r\n\tname: 'icn',\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\tmedia: 'layout/getMedia',\r\n\t\t\tgetUserInfo: 'auth/getUserInfo',\r\n\t\t\tlistUsers: 'lu/getListUsersMZ',\r\n\t\t\tapiUrl: 'apiUrl'\r\n\t\t})\r\n\t},\r\n\tdata: () => ({\r\n\t\tsearch: {\r\n\t\t\tMPNKO: '',\r\n\t\t\tfio: '',\r\n\t\t\tlogin: ''\r\n\t\t},\r\n\t\topen: false,\r\n\t\topen1: false,\r\n\t\tcheckColumn: 'name',\r\n\t\tcolumns: [\r\n\t\t\t{name: 'Роль', view: false, sort: false, nameEng: 'department'},\r\n\t\t\t{name: 'МНПКО', view: true, sort: false, nameEng: 'companyName'},\r\n\t\t\t{name: 'ФИО', view: true, sort: false, nameEng: 'name'},\r\n\t\t\t{name: 'Логин', view: true, sort: false, nameEng: 'login'}\r\n\t\t],\r\n\t}),\r\n\tmethods: {\r\n\t\t...mapActions({\r\n\t\t\tgetUserMZ: 'lu/getUserMZ'\r\n\t\t}),\r\n\t\t...mapMutations({\r\n\t\t\tsortMutationMZ: 'lu/sortMutationMZ'\r\n\t\t}),\r\n\t\tsortFunc(e) {\r\n\t\t\te.sort = !e.sort\r\n\t\t\tthis.checkColumn = e.nameEng\r\n\t\t\tthis.sortMutationMZ({column: e.nameEng, sort: e.sort ? 'asc' : 'desc'})\r\n\t\t},\r\n\t\teditRow(row) {\r\n\t\t\tthis.$router.push({path: `/editUser/${row.id}`, query: { mz: 'true' }})\r\n\t\t},\r\n\t\tdownloadReports() {\r\n\t\t\tthis.api.post(`${this.apiUrl}api/Users/Report`, {\r\n\t\t\t\troleId:1,\r\n\t\t\t\tcompanyName: this.search.MPNKO?this.search.MPNKO:undefined,\r\n\t\t\t\tname: this.search.fio?this.search.fio:undefined,\r\n\t\t\t\temail: this.search.login?this.search.login:undefined\r\n\t\t\t}, { responseType: 'blob' })\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconst url = window.URL.createObjectURL(new Blob([response.data]));\r\n\t\t\t\tconst link = document.createElement('a');\r\n\t\t\t\tlink.href = url;\r\n\t\t\t\tlink.setAttribute('download', 'Отчет.xlsx');\r\n\t\t\t\tdocument.body.appendChild(link);\r\n\t\t\t\tlink.click();\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.log(error))\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tsetTimeout(() => { this.sortMutationMZ({column: 'name', sort: 'desc'}) }, 100)\r\n\t\tthis.getUserMZ(this.search)\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import '../../style/stylePages.css';\r\n\r\ntable tbody tr:hover {\r\n\tbackground: #f1f1f1;\r\n\tbox-shadow: 0 1.5px 6px #00000080;\r\n}\r\ntr td {\r\n\ttext-align: center!important;\r\n}\r\ntr th {\r\n\ttext-align: center!important;\r\n}\r\n\r\n.pointer {\r\n\tcursor: pointer;\r\n}\r\n</style>"]}]}